{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Your Budgets</h1>

    <h2>Main Budget</h2>
    {% if main_budget and main_budget.id %}
        <p>Your main budget amount is: ${{ current_user.main_budget }}</p>
        <!-- Assuming you want to provide an option to delete the main budget too -->
        <form action="{{ url_for('delete_budget', budget_id=main_budget.id) }}" method="post">
            <input type="submit" value="Delete Main Budget" onclick="return confirm('Are you sure you want to delete the main budget?');">
        </form>
    {% else %}
        <p>You haven't set a main budget yet.</p>
    {% endif %}

    <h2>Category Budgets</h2>
    {% if category_budgets %}
        <table>
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Amount</th>
                    <th>Action</th>  <!-- New column header for the delete action -->
                </tr>
            </thead>
            <tbody>
                {% for budget in category_budgets %}
                    <tr>
                        <td>{{ budget.category }}</td>
                        <td>${{ budget.budget_amount }}</td>  <!-- Updated to budget.budget_amount -->
                        <td>
                            <!-- Form for deletion -->
                            <form action="{{ url_for('delete_budget', budget_id=budget.id) }}" method="post">
                                <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this budget for {{ budget.category }}?');">
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>You haven't set any category budgets yet.</p>
    {% endif %}
</div>  <!-- Closing div tag added here -->
{% endblock %}
